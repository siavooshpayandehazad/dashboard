<!DOCTYPE html>

<html lang="en">
<head>
  <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <link rel="stylesheet" href="/static/lib/WorldMap/dist/css/jsvectormap.css" />
  <link rel="stylesheet" href="/static/lib/font-awesome-4.7.0/css/font-awesome.min.css"></script>
  <script src="/static/lib/WorldMap/dist/js/jsvectormap.min.js"></script>
  <script src="/static/lib/WorldMap/dist/maps/world.js"></script>
  <script src="/static/lib/Chart.min.js" charset="utf-8"></script>
  <script src="/static/lib/jquery.min.js" charset="utf-8"></script>
  <title>My Journal</title>
</head>

{%if pageTheme=="Dark"%}
<body class="featured">
{% else %}
<body>
{% endif %}
<div id="overlay">
  <div style="border-radius: 20px; margin-left: 40%; margin-top: 20%;width:200px;height:70px;background-color:white; text-align: center;">
    enter your password</br>
    <input type="password" id="password"><br>
    <input type="submit" style="margin-left: 30%; margin-top: 5px;" onclick="login()">
  </div>
</div>

<script type="text/javascript">
  const zeroPad = (num, places) => String(num).padStart(places, '0')
  function login(){
    var password = document.getElementById("password").value;
     document.getElementById("password").value = "";
    $.ajax({
        type: "POST",
        url: "http://localhost:5000/home",
        data: {"password": password},
    }).success(function(result){
      if (result == "success"){
        localStorage.setItem('token',"true");
        document.getElementById("overlay").style.display = "none";
        document.getElementById("password").style.backgroundColor = "white";
      }
      else{
        document.getElementById("password").style.backgroundColor = "#fc9272";
      }
    })
  }

  function checkLoggedIn () {
    const token = localStorage.getItem('token');
    if (token === "false"){
      document.getElementById("overlay").style.display = "block";
    }
  }

  function logout(){
    document.getElementById("overlay").style.display = "block";
    localStorage.setItem('token',"false");
  }

  checkLoggedIn();
</script>

  {% include "trackerModules/graphFuncs.html" %}

  {% with page="index" %}
    {% include "header.html" %}
  {% endwith %}

  <div>
    <!-- Header! -->
    <h1 style= "font-family:Impact;"> <font style="text-decoration: underline;"> {{ name }}</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    {% if PageMonth > 1  %}
      <a class= "arrow hover-red" href="/home?date={{PageYear}}-{{'%02d' % (PageMonth-1)}}">&#9668;</a>
    {% else %}
      <a class= "arrow hover-red" href="/home?date={{PageYear-1}}-{{'%02d' % (12)}}">&#9668;</a>
    {% endif %}
    {{titleDate}}
    {% if PageMonth < 12  %}
      <a class= "arrow hover-red" href="/home?date={{PageYear}}-{{'%02d' % (PageMonth+1)}}">&#9658;</a>
    {% else %}
      <a class= "arrow hover-red" href="/home?date={{PageYear+1}}-{{'%02d' % (1)}}">&#9658;</a>
    {% endif %}
    </h1>

    <div style="width:120px;float:left; margin-right:10px;margin-top:5px;">

      <div style="float:right;">
      <!-- weather widget start -->
      {%if pageTheme=="Dark"%}
        <script type='text/javascript' src='https://darksky.net/widget/default-small/55.7081,13.1973/uk12/en.js?width=100%&height=60&title=Full Forecast&textColor=d9d9d9&bgColor=transparent&transparency=true&skyColor=undefined&fontFamily=Default&customFont=&units=uk'></script>
      {%else%}
        <script type='text/javascript' src='https://darksky.net/widget/default-small/55.7081,13.1973/uk12/en.js?width=100%&height=60&title=Full Forecast&textColor=1b46ae&bgColor=transparent&transparency=true&skyColor=undefined&fontFamily=Default&customFont=&units=uk'></script>
      {%endif%}
      <!-- weather widget end -->
      </div>

    {% with counterValue = counterValue %}
        {% include "trackerModules/counter.html" %}
    {% endwith %}

    {% with days = days, highlight=highlight,today=today, activityList=activityList, monthsActivitiesPlanned=monthsActivitiesPlanned%}
        {% include "trackerModules/activityTracker.html" %}
    {% endwith %}

    {% with days = days, moods = moods, PageYear=PageYear, PageMonth=PageMonth, today=today %}
        {% include "trackerModules/moodTracker.html" %}
    {% endwith %}


    <div style="margin-left: 5px;float:left; min-width:130px;">
      {%if pageTheme=="Dark"%}
      <img src= "{{url_for('static', filename = 'decorationImages/page1_Large_dark.png')}}" float="right" width="130" alt="page1_Large_dark">
      {% else %}
      <img src= "{{url_for('static', filename = 'decorationImages/page1_Large.png')}}" float="right" width="130" alt="page1_Large">
      {% endif %}
    </div>

    <div style="width:100%; margin-left:5px;  margin-bottom: 10px; float:left; min-width:200px;">
      <div class="divider" style="width:90%; height:4px; float:left; margin-left: 3.3%; margin-top: 18px;"></div>
      <img src= "{{url_for('static', filename = 'decorationImages/page1_Small.png')}}" float="left" width="50px" alt="page1_Small">
    </div>

    {% with dataset = monthsWorkHours, ChartMonthDays = ChartMonthDays, chartType = "bar",
            thresholds = [4, 6, 8], trackerName = "work hours", unit="(hrs)", addAvg="true", tcf="true",
            pointStyle = 'rect', showTotalVal = True, suggestedMin = 0,
            bgColors = ['rgba(252,146,114, 1)', 'rgba(254,196,79, 1)', 'rgba(107,174,214, 1)', 'rgba(128,205,193, 1)'],
            bColors = ['rgba(203,24,29, 1)', 'rgba(236,112,20, 1)', 'rgba(33,113,181, 1)', 'rgba(53,151,143, 1)']%}
        {% include "trackerModules/singleChart.html" %}
    {% endwith %}

    {% with YearsSavings = YearsSavings, ChartYearMonths = ChartYearMonths,
            PageYear = PageYear, PageMonth = PageMonth%}
        {% include "trackerModules/savingTracker.html" %}
    {% endwith %}

    <div style="width:100%; margin-right:5px; margin-bottom: 10px; float:left; min-width:200px;">
      <div class="divider" style="width:90%; height:4px; float:right; margin-right: 3.3%; margin-top: 18px;"></div>
      <img src= "{{url_for('static', filename = 'decorationImages/page1_Small.png')}}" style="transform: rotate(180deg); float:right" width="50px" alt="page1_Small">
    </div>

    {% with dataset = monthsWeights, ChartMonthDays = ChartMonthDays, chartType = "line",
            thresholds = [], trackerName = "weight", unit="(kg)", addAvg="true", tcf="true",
            pointStyle = 'cicle', showTotalVal = False, suggestedMin = 60,
            bgColors = ['rgba(128,205,193, 0.3)'],
            bColors = ['rgba(53,151,143, 1)']%}
        {% include "trackerModules/singleChart.html" %}
    {% endwith %}

    {% with HR_Max = HR_Max, HR_Min = HR_Min, ChartMonthDays = ChartMonthDays, PageYear = PageYear, PageMonth = PageMonth%}
        {% include "trackerModules/heartRateTracker.html" %}
    {% endwith %}

    {% with dataset = monthsSleepTimes, ChartMonthDays = ChartMonthDays, chartType = "bar",
            thresholds = [8], trackerName = "sleep", unit="(hrs)", addAvg="true", tcf="true",
            pointStyle = 'rect', showTotalVal = True, suggestedMin = 0,
            bgColors = ['rgba(188,189,220, 1)', 'rgba(106,81,163, 1)'],
            bColors = ['rgba(158,154,200, 1)', 'rgba(106,81,163, 1)']%}
        {% include "trackerModules/singleChart.html" %}
    {% endwith %}

    {% with dataset = monthsSteps, ChartMonthDays = ChartMonthDays, chartType = "bar",
            thresholds = [8000], trackerName = "step", unit="", addAvg="true", tcf="false",
            pointStyle = 'rect', showTotalVal = True, suggestedMin = 0,
            bgColors = ['rgba(173,221,142, 1)', 'rgba(0,109,44, 1)'],
            bColors = ['rgba(116,196,118, 1)', 'rgba(0,109,44, 1)']%}
        {% include "trackerModules/singleChart.html" %}
    {% endwith %}

    {% with monthsRuns = monthsRuns, monthsPaces = monthsPaces, ChartMonthDays = ChartMonthDays, PageYear = PageYear, PageMonth = PageMonth %}
        {% include "trackerModules/runningTracker.html" %}
    {% endwith %}


    <div style="width:100%; margin-left:5px;  margin-bottom: 10px; float:left; min-width:200px;">
      <div class="divider" style="width:90%; height:4px; float:left; margin-left: 3.3%; margin-top: 18px;"></div>
      <img src= "{{url_for('static', filename = 'decorationImages/page1_Small.png')}}" float="left" width="50px" alt="page1_Small">
    </div>

    {% with travels = travels%}
      {% include "trackerModules/travelTracker.html" %}
    {% endwith %}

    <div style="width:100%; margin-right:5px; margin-bottom: 10px; float:left; min-width:200px;">
      <div class="divider" style="width:90%; height:4px; float:right; margin-right: 3.3%; margin-top: 18px;"></div>
      <img src= "{{url_for('static', filename = 'decorationImages/page1_Small.png')}}" style="transform: rotate(180deg); float:right" width="50px" alt="page1_Small">
    </div>
</body>

<script>

function renderchart() {
   renderHeartRateChart();
   renderSavingTrackerChart();
   renderRunningTrackerChart();
}

window.onload = renderchart;
</script>
</html>
