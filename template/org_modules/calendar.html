<link rel="stylesheet" href="{{ url_for('static', filename='styles/calendar.css') }}">

<script>
    Date.prototype.getWeek = function() {
        var onejan = new Date(this.getFullYear(), 0, 1);
        return Math.ceil((((this - onejan) / 86400000) + onejan.getDay() + 1) / 7);
    }

    function showWeekMonth(calType){
      if(calType=="Month"){
        document.getElementById("WeekCal").style.display="none";
        document.getElementById("MonthCal").style.display="";
        window['CalType'] = "Month";
        drawMonthEvents();
      }else{
        document.getElementById("WeekCal").style.display="";
        document.getElementById("MonthCal").style.display="none";
        window['CalType'] = "Week";
        drawCurrentTime();
        markToday();
        drawEvents();
      }
    }


    function colorFilterCalendar(){
      console.log(window["CalType"])
      if (window["CalType"] == "Week" || window["CalType"] == undefined){
        drawEvents();
      }else{
        drawMonthEvents()
      }
    }
</script>

  <div class="col-sm-12 col-lg-12">
      <div style="float:right; margin-top:10px; margin-right:10px;">
         <b ><i class="fa fa-filter" style="color:white; margin-right:4px"></i> </b>
         <select id="calFilter" onchange="colorFilterCalendar(this)">
            <option>None</option>
            {% for color in ["pink", "gold", "powderblue", "tomato", "skyBlue", "teal"]%}
              <option style="background-color:{{color}}">{{color}}</option>
            {% endfor %}
          </select>
      </div>
  </div>

  <div class="col-sm-12 col-lg-12">
    {% with  month = month, year = year, day = day, calMonth = calMonth%}
             {% include "org_modules/MonthCal.html" %}
    {% endwith %}

    {% with  month = month, year = year, day = day,  daysBeginning = 6, daysEnd = 22,
            headerDates = headerDates, monthsBeginning = monthsBeginning, calDate = calDate%}
            {% include "org_modules/WeekCal.html" %}
    {% endwith %}
  </div>

<script type="text/javascript">
  showWeekMonth(vars["CalType"])
</script>
