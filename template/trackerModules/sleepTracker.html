<script type="text/javascript">
function renderSleepTrackerChart(){

  var Sleep_BG_Colors = []
  var Sleep_B_Colors = []
  var monthsSleepHoursTemp = {{monthsSleepTimes | safe}}
  monthsSleepHoursTemp.forEach((item, i) => {
    if(parseInt(item)<7){
      Sleep_BG_Colors.push('rgba(218,218,235, 1)')
      Sleep_B_Colors.push('rgba(188,189,220, 1)')
    }else if(parseInt(item)<8){
      Sleep_BG_Colors.push('rgba(158,154,200, 1)')
      Sleep_B_Colors.push('rgba(128,125,186, 1)')
    }else if(parseInt(item)>10){
      Sleep_BG_Colors.push('rgba(106,81,163, 1)')
      Sleep_B_Colors.push('rgba(84,39,143, 1)')
    }else{
      Sleep_BG_Colors.push('rgba(106,81,163, 1)')
      Sleep_B_Colors.push('rgba(84,39,143, 1)')
    }
  });

  var ctx = document.getElementById("sleepTracker").getContext('2d');
  var WeightBarChart = new Chart(ctx, {
     type: 'bar',
     data: {
        labels: {{ChartMonthDays|safe}},
        datasets: [{
           label: "Sleep time (hr)",
           data: {{monthsSleepTimes|safe}},
           backgroundColor: Sleep_BG_Colors,
           //borderColor: Sleep_B_Colors,
           borderWidth: 2,
           spanGaps: true
        }
      ]
     },
     options: { scales: { yAxes: [{ ticks:{beginAtZero: true }}]}}
  });
}

function submitSleep(){
  var sleep = document.getElementById("sleeptVal").value;
  $.ajax({
      type: "POST",
      url: "http://localhost:5000/home",
      data: {"tracker_type":"sleep", "value": sleep},
  });
  document.getElementById("sleeptVal").value = "";
  renderSleepTrackerChart();
}
</script>


<div style="width:45%;min-height:220px;background-color:white;margin-bottom: 20px; margin-left:3.3%;border-radius:10px;text-align:center;float:left;">
  <div style="margin-top: 10px; margin-right: 20px; width: 200px; float:right" >
    Sleep time: <input type="text" id="sleeptVal" name="date" style="width: 50px; ">
    <i class="fa fa-check" id="submitToGraph" onclick="submitSleep()"></i>
  </div>
  <h2  class="title lightbg"  style="float:left; margin-left: 20px;">Sleep Tracker</h2>
  <div style="float:left; width:90%; margin-left:5%">
    <canvas  height="100px" id="sleepTracker"></canvas>
  </div>
</div>
